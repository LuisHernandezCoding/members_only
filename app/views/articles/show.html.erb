<section class="px-4 flex sm:flex-row flex-col">
  <section class="sm:block hidden w-1/3 md:w-1/6 lg:w-1/12">
    <img src="<%= image_path('singing.svg') %>" alt="logo" class="w-full transform hover:scale-110 transition duration-500 ease-in-out">
  </section>
  <section class="w-full sm:w-2/3 md:w-5/6 lg:w-11/12">
    <div class="bg-white bg-opacity-70 shadow-lg rounded-lg border border-gray-200">
      <header class="px-5 py-4 border-b border-gray-100">
        <h2 class="font-semibold text-gray-800 text-xl flex justify-between">
          <div class="py-2"><%= @article.title %></div>
          <div>
            <% if current_user == @article.user %>
              <div class="flex flex-row justify-center gap-2">
                <div class="py-2">
                  <%= link_to "Modify", edit_article_path(@article),
                    class: "bg-green-900 hover:bg-green-800 text-white font-bold py-2 px-4 rounded-full w-full text-center text-sm" %>
                </div>
                <div class="py-2">
                  <%= link_to "Delete", article_path(@article), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" },
                    class: "bg-red-900 hover:bg-red-800 text-white font-bold py-2 px-4 rounded-full w-full text-center text-sm" %>
                </div>
              </div>
            <% end %>
          </div>
        </h2>
      </header>
      <div class="p-3">
        <p class="text-gray-800 text-sm"><%= @article.body %></p>
      </div>
      <footer class="px-5 pb-1 border-t border-gray-100">
        <div class="flex flex-row justify-end gap-2">
          <div class="flex flex-row items-center text-gray-800 text-sm">
            <%= @article.created_at.strftime("%d/%m/%Y") %> - <%= @article.created_at.strftime("%H:%M") %>
            <p class="font-semibold pl-2">
              by: 
              <% if current_user %>
                <a href="<%= user_path(@article.user) %>" class="text-green-900 hover:text-green-800 hover:underline">
                  <%= @article.user.name %>
                </a>
              <% else %>
                <div class="text-green-900 pl-1">
                  <a href="<%= login_path %>" class="hover:text-green-800 hover:underline">
                    Log in to see the author
                  </a>
                </div>
              <% end %>
            </p>
          </div>
        </div>
      </footer>
    </div>
    <% if @article.comments.any? %>
      <div class="bg-white bg-opacity-70 shadow-lg border border-gray-200 mt-4">
        <header class="px-5 py-4 border-b border-gray-100">
          <h2 class="font-semibold text-gray-800 text-lg">Comments</h2>
        </header>
        <div class="p-3">
          <table class="table table-striped w-full">
            <thead>
              <tr>
                <th scope="col" class="text-right">Author</th>
                <th scope="col" class="text-left pl-2">Comment</th>
              </tr>
            </thead>
            <tbody>
              <%= render @article.comments %>
            </tbody>
          </table>
        </div>
      </div>
    <% end %>
    <div class="bg-white bg-opacity-70 shadow-lg border border-gray-200 mt-4">
      <header class="px-5 py-4 border-b border-gray-100">
        <h2 class="font-semibold text-gray-800 text-lg">Add a comment</h2>
      </header>
      <div class="p-3">
        <% if current_user %>
          <%= render 'comments/form', article: @article %>
        <% else %>
          <div class="text-gray-800 text-sm">
            <p class="font-semibold">You need to be logged in to comment</p>
            <p class="font-semibold">If you don't have an account, you can create one <a href="<%= signup_path %>" class="text-green-900 hover:text-green-800 hover:underline">here</a></p>
          </div>
        <% end %>
      </div>
    </div>
  </section>
</section>
